<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Cirrus Trading Cards</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Spice&family=Playwrite+NZ+Guides&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<h2>Shopping Cart</h2>
<table id="cartTable" border="1" cellspacing="0" cellpadding="6">
    <thead>
        <tr>
            <th>Item</th>
            <th>Price ($)</th>
            <th>Qty</th>
            <th>Sub-Total ($)</th>
            <th>Discount ($)</th>
            <th>Tax ($)</th>
            <th>Total ($)</th>
            <th>Remove</th>
        </tr>
    </thead>

    <tbody></tbody>
</table>

<h3 id="grandTotal">Grand Total: $0.00</h3>

<script>
let cart = [
    { name: "Item",      price: 0, qty: 1 },
    { name: "Item",  price: 0,  qty: 2 },
    { name: "Item",   price: 0,  qty: 3 }
];

function calculate(price, qty) {
    let subTotal = price * qty;
    let discount = subTotal > 100 ? subTotal * 0.10 : 0; 
    let tax = (subTotal - discount) * 0.15;
    let total = subTotal - discount + tax;

    return {
        subTotal,
        discount,
        tax,
        total
    };
}

function renderCart() {
    let tbody = document.querySelector("#cartTable tbody");
    tbody.innerHTML = "";

    let grandTotal = 0;

    cart.forEach((item, index) => {
        let result = calculate(item.price, item.qty);
        grandTotal += result.total;

        tbody.innerHTML += `
            <tr>
                <td>${item.name}</td>
                <td>${item.price.toFixed(2)}</td>

                <td>
                    <input type="number" min="1" value="${item.qty}"
                           onchange="updateQty(${index}, this.value)">
                </td>

                <td>${result.subTotal.toFixed(2)}</td>
                <td>${result.discount.toFixed(2)}</td>
                <td>${result.tax.toFixed(2)}</td>
                <td>${result.total.toFixed(2)}</td>

                <td>
                    <button onclick="removeItem(${index})">X</button>
                </td>
            </tr>
        `;
    });

    document.getElementById("grandTotal").textContent =
        "Grand Total: $" + grandTotal.toFixed(2);
}

function updateQty(index, newQty) {
    cart[index].qty = Number(newQty);
    renderCart();
}


function removeItem(index) {
    cart.splice(index, 1);
    renderCart();
}

renderCart();
</script>

</body>
</html>
