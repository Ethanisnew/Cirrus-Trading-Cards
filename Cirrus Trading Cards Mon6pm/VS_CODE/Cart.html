<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Cirrus Trading Cards</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Spice&family=Playwrite+NZ+Guides&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<h2>Shopping Cart</h2>

<table id="cartTable" border="1" cellspacing="0" cellpadding="6">
  <thead>
    <tr>
      <th>Item</th>
      <th>Price ($)</th>
      <th>Qty</th>
      <th>Sub-Total ($)</th>
      <th>Discount ($)</th>
      <th>Tax ($)</th>
      <th>Total ($)</th>
      <th>Remove</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h3 id="grandTotal">Grand Total: $0.00</h3>

<script>
let cart = [
  { name: "Laptop", price: 600, qty: 1 },
  { name: "Headphones", price: 50, qty: 2 },
  { name: "USB Cable", price: 10, qty: 3 }
];

function calculate(price, qty) {
  let sub = price * qty;
  let discount = sub > 100 ? sub * 0.10 : 0;
  let tax = (sub - discount) * 0.15;
  let total = sub - discount + tax;
  return { sub, discount, tax, total };
}

function renderCart() {
  const tbody = document.querySelector("#cartTable tbody");
  tbody.innerHTML = "";
  let grand = 0;

  cart.forEach((item, index) => {
    let { sub, discount, tax, total } = calculate(item.price, item.qty);
    grand += total;

    tbody.innerHTML += `
      <tr>
        <td>${item.name}</td>
        <td>${item.price.toFixed(2)}</td>
        <td>
          <input type="number" min="1" value="${item.qty}" 
          onchange="updateQty(${index}, this.value)">
        </td>
        <td>${sub.toFixed(2)}</td>
        <td>${discount.toFixed(2)}</td>
        <td>${tax.toFixed(2)}</td>
        <td>${total.toFixed(2)}</td>
        <td><button onclick="removeItem(${index})">X</button></td>
      </tr>
    `;
  });

  document.getElementById("grandTotal").textContent =
    "Grand Total: $" + grand.toFixed(2);
}

function updateQty(i, qty) {
  cart[i].qty = Number(qty);
  renderCart();
}

function removeItem(i) {
  cart.splice(i, 1);
  renderCart();
}

renderCart();
</script>

</body>
</html>

